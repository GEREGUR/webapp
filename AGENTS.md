# Agent Instructions

This document provides guidelines for AI agents working on this codebase.

## Project Overview

Telegram Mini App built with React 19, TypeScript, Vite, and Tailwind CSS. Follows Feature-Sliced Design (FSD) architecture.

## Build Commands

```bash
pnpm run dev           # Start dev server (HTTP)
pnpm run dev:https    # Dev server with HTTPS (required for Telegram)
pnpm run build        # TypeScript check + production build
pnpm run lint         # ESLint with strict rules
pnpm run lint:fix     # Auto-fix ESLint issues
pnpm run deploy       # Build and deploy to GitHub Pages
```

**Always run `pnpm run lint` and `pnpm run build` before completing work.**

## FSD Layers (top to bottom)

```
app → pages → widgets → features → entities → shared
```

**Import rules:** Modules can only import from layers strictly below.

- `app` → all layers
- `pages` → pages, widgets, features, entities, shared
- `widgets` → widgets, features, entities, shared
- `features` → features, entities, shared
- `entities` → entities, shared
- `shared` → shared only

## Naming Conventions

- **Files/Directories**: kebab-case (`src/pages/ton-connect-page/ton-connect-page.tsx`)
- **Components**: PascalCase (`CreateOrderButton`)
- **Hooks**: camelCase with "use" prefix (`useTasks`, `useCreateOrder`)
- **Interfaces**: PascalCase (`TaskProps`)

## Code Style

### Imports

Use path aliases from `tsconfig.json`:

```typescript
import { Page } from '@/pages/page';
import { Button } from '@/shared/ui/button';
import { useTasks } from '@/entities/tasks/api';
import { useTasksPage } from '@/entities/tasks/model';
```

**Order:** React/External → Path aliases (@/...) → Relative (./, ../)

### TypeScript

- Always use explicit types for props and function parameters
- Avoid `any` - use `unknown` or proper generics
- Use interface for objects, type for unions

### React Best Practices

**Hooks Rules:** Always call hooks in the same order. Never call hooks after early returns.

```typescript
// ✅ Good - hooks before early return
export const Component = () => {
  const [state, setState] = useState('');
  const query = useQuery();
  if (query.isLoading) return <Spinner />;
  return <div>{query.data}</div>;
};
```

**Extract Logic to Hooks:** UI components should not contain business logic.

```typescript
// ✅ Good - logic in hook
export const useTasksPage = () => {
  const { data } = useTasks();
  return { tasks: data?.tasks ?? [], isLoading: !data };
};

export const TasksPage = () => {
  const { tasks, isLoading } = useTasksPage();
  return <TaskList tasks={tasks} />;
};
```

### CSS & Styling

- Use Tailwind CSS utility classes
- Use `cn()` from `@/shared/lib/utils` for conditional classes

```typescript
<div className={cn('flex gap-2', isActive && 'bg-white/10')} />
```

### Error Handling

- Use try/catch for async operations
- Show user-friendly errors via toast
- Never use console.log in production

### SVG Icons

Use `currentColor` for stroke/fill, never hardcode colors.

## Quality Standards

1. No AI-generated comments (remove "Generated by AI")
2. No console.log statements - use toast notifications
3. All TypeScript errors must be resolved
4. ESLint must pass without warnings
5. Follow FSD import rules

## Path Aliases

| Alias        | Path           |
| ------------ | -------------- |
| `@/app`      | `src/app`      |
| `@/pages`    | `src/pages`    |
| `@/widgets`  | `src/widgets`  |
| `@/features` | `src/features` |
| `@/entities` | `src/entities` |
| `@/shared`   | `src/shared`   |

## Development Notes

- Use `pnpm run dev:https` for local development
- App uses `mockTelegramEnv` for development outside Telegram
- SSL certificates auto-generated locally
